<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <title>Царев Дижитал — Intro Animation (v18 • solid spinner + Digital text)</title>
  <style id="intro-theme">
    :root {
      --brand-1: #7C3AED;
      --brand-2: #06B6D4;
      --brand-3: #22C55E;
      --brand-4: #60A5FA;
      --bg-1: #070709;
      --bg-2: #0b0b10;
      --intro-duration: 4000ms;
    }
    html,body{margin:0;height:100%;background:var(--bg-1);color:#fff;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
    body.no-scroll{overflow:hidden}
    .intro{position:fixed;inset:0;z-index:9999;display:grid;place-items:center;isolation:isolate;overflow:clip;background:radial-gradient(120% 120% at 50% 60%,var(--bg-2)0%,var(--bg-1)60%,#050507 100%)}
    .intro.exit{animation:vanish .9s cubic-bezier(.3,.7,0,1) forwards}
    @keyframes vanish{to{opacity:0;transform:scale(.985);visibility:hidden}}
    .wrap{text-align:center;z-index:2;position:relative}
    .logoCard{position:relative;display:grid;place-items:center;gap:14px;padding:26px 30px;border-radius:24px;background:rgba(255,255,255,.03);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);box-shadow:0 10px 50px rgba(0,0,0,.55),inset 0 0 0 1px rgba(255,255,255,.06);animation:cardRise 1.1s cubic-bezier(.2,.7,.2,1) both}
    @keyframes cardRise{from{opacity:0;transform:translateY(18px)}to{opacity:1;transform:none}}
    .spinnerSq{ width:clamp(120px,22vw,200px); height:clamp(120px,22vw,200px); border-radius:24px; display:inline-block; position:relative; }
    .spinnerSq::before{ content:""; position:absolute; inset:0; border-radius:24px; background:conic-gradient(from 0deg,#60A5FA,#06B6D4,#22C55E,#7C3AED,#60A5FA); animation:spin 1.6s linear infinite,hueShift 8s linear infinite; filter:saturate(1.25) brightness(1.08) contrast(1.05); box-shadow:inset 0 0 40px rgba(255,255,255,.12),0 12px 40px rgba(96,165,250,.35); }
    .spinnerSq::after{ content:""; position:absolute; inset:0; border-radius:24px; background:linear-gradient(135deg,rgba(255,255,255,.22)0%,rgba(255,255,255,.0)45% 100%); mix-blend-mode:overlay; opacity:.65; filter:blur(.2px); transform:translate3d(0,0,0); animation:shimmer 3.6s ease-in-out infinite; pointer-events:none; }
    @keyframes spin{to{transform:rotate(360deg)}}
    @keyframes hueShift{to{filter:saturate(1.25) brightness(1.08) contrast(1.05) hue-rotate(360deg)}}
    @keyframes shimmer{0%,100%{opacity:.55;transform:translateX(-6%)rotate(.001deg)}50%{opacity:.85;transform:translateX(6%)rotate(.001deg)}}
    .title{font-weight:900;letter-spacing:-.02em;font-size:clamp(28px,3.6vw,56px);text-shadow:0 0 20px rgba(99,102,241,.35)}
    .subtitle{opacity:0;font-size:clamp(16px,2vw,20px);margin:0;animation:fadeIn 1.8s ease forwards .5s;text-shadow:0 0 18px rgba(124,58,237,.25),0 0 22px rgba(6,182,212,.20)}
    .subtitle span{font-weight:800}
    @keyframes fadeIn{to{opacity:1}}
    .loadingRow{display:flex;gap:10px;align-items:baseline;justify-content:center;margin-top:6px;opacity:.9}
    .loadingText{font-weight:700;letter-spacing:.02em}
    .dots{display:inline-block;width:1.2em;text-align:left}
    .dots::after{content:"…";animation:dots 1.2s steps(4,end) infinite}
    @keyframes dots{0%{content:""}25%{content:"."}50%{content:".."}75%{content:"..."}100%{content:""}}
    .progress{height:6px;width:min(60vw,480px);margin:14px auto 0;border-radius:999px;background:rgba(255,255,255,.12);overflow:hidden;position:relative}
    .progress__bar{height:100%;width:0%;background:linear-gradient(90deg,var(--brand-4),var(--brand-2),var(--brand-1));animation:load var(--intro-duration) ease forwards}
    @keyframes load{to{width:100%}}
    .progress__pct{position:absolute;right:10px;top:50%;transform:translateY(-50%);font:600 12px/1 ui-monospace,Menlo,Consolas,monospace;opacity:.8}
    .wipe{position:absolute;width:120px;height:120px;border-radius:999px;background:#000;left:calc(var(--x,50vw) - 60px);top:calc(var(--y,50vh) - 60px);transform:scale(0);transition:transform .9s cubic-bezier(.2,.7,0,1),opacity .3s ease;z-index:10;pointer-events:none;box-shadow:0 0 0 2px rgba(0,0,0,.25),0 40px 120px rgba(0,0,0,.55)}
    .wipe.on{transform:scale(18)}
    .bgfx{position:absolute;inset:0;z-index:-1;display:block}
    .grain{position:absolute;inset:-10%;z-index:-1;pointer-events:none;opacity:.08;mix-blend-mode:overlay;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="4" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23n)"/></svg>');animation:grainShift 8s linear infinite}
    @keyframes grainShift{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(-6%,-6%,0)}}
    .beam{position:absolute;inset:-20%;z-index:-1;pointer-events:none;mix-blend-mode:screen;opacity:.55;filter:blur(60px)saturate(1.1);background:radial-gradient(40% 80% at 10% 50%,rgba(124,58,237,.2),transparent 60%),linear-gradient(20deg,transparent 25%,rgba(96,165,250,.18) 40%,rgba(34,211,238,.22) 55%,transparent 70%);transform:rotate(-8deg);animation:beamDrift 24s ease-in-out infinite}
    @keyframes beamDrift{50%{transform:rotate(-3deg) translate3d(-2%,-2%,0);opacity:.7}}
    .scanlines{position:absolute;inset:0;z-index:-1;pointer-events:none;opacity:.05;mix-blend-mode:soft-light;background:repeating-linear-gradient(to bottom,rgba(255,255,255,.08) 0,rgba(255,255,255,.08) 1px,transparent 1px,transparent 3px);animation:scanDrift 12s linear infinite}
    @keyframes scanDrift{50%{transform:translateY(-2%)}}
    main{min-height:100vh;display:grid;place-items:center}
  </style>
</head>
<body class="no-scroll">
  <div class="intro" id="intro">
    <canvas id="bgfx" class="bgfx"></canvas>
    <div class="grain"></div>
    <div class="beam"></div>
    <div class="scanlines"></div>
    <div class="wrap">
      <div class="wipe" id="wipe"></div>
      <div class="logoCard" id="logoCard">
        <div class="spinnerSq" aria-hidden="true"></div>
        <h1 class="title">Царев Дижитал</h1>
        <p class="subtitle">Создаём <span>Digital</span> будущее</p>
        <div class="loadingRow">
          <span class="loadingText">Загрузка</span>
          <span class="dots"></span>
        </div>
        <div class="progress">
          <div class="progress__bar" id="bar"></div>
          <div class="progress__pct" id="pct">0%</div>
        </div>
      </div>
    </div>
  </div>
  <main id="site" inert>
    <h1>Главная страница</h1>
  </main>
<script>
(function(){
  if(document.readyState==='loading')document.addEventListener('DOMContentLoaded',init,{once:true}); else init();
  function init(){
    const CONFIG={autoHideFallbackMs:4000};
    const intro=document.getElementById('intro');const site=document.getElementById('site');const wipe=document.getElementById('wipe');const logoCard=document.getElementById('logoCard');const bgfx=document.getElementById('bgfx');const bar=document.getElementById('bar');const pct=document.getElementById('pct');
    function exitIntro(){intro.classList.add('exit');site.removeAttribute('inert');if(window.__stopBg)window.__stopBg();setTimeout(()=>{intro.remove();document.body.classList.remove('no-scroll');document.body.classList.add('ready');},900);}
    function portalAndExit(){const r=logoCard.getBoundingClientRect();wipe.style.setProperty('--x',(r.left+r.width/2)+'px');wipe.style.setProperty('--y',(r.top+r.height/2)+'px');wipe.classList.add('on');intro.style.background='#000';setTimeout(exitIntro,860);}
    const start=performance.now();const D=CONFIG.autoHideFallbackMs;(function tick(){const now=performance.now();const p=Math.max(0,Math.min(1,(now-start)/D));pct.textContent=Math.round(p*100)+'%';if(p<1){requestAnimationFrame(tick);}})();
    setTimeout(portalAndExit,D);window.addEventListener('keydown',e=>{if(e.code==='Enter'||e.code==='Space')portalAndExit();},{once:true});window.addEventListener('wheel',()=>portalAndExit(),{once:true,passive:true});
    const ctx=bgfx.getContext('2d');const dpr=Math.min(window.devicePixelRatio||1,2.25);let W,H,t=0,raf;const colors=['#60A5FA','#22D3EE','#A78BFA'];const blobs=Array.from({length:7},(_,i)=>({r:120+Math.random()*160,spx:0.15+Math.random()*0.25,spy:0.15+Math.random()*0.25,ampX:0.25+Math.random()*0.45,ampY:0.25+Math.random()*0.45,phaseX:Math.random()*6.28,phaseY:Math.random()*6.28,hue:colors[i%3]}));const stars=Array.from({length:180},()=>({x:Math.random(),y:Math.random(),z:Math.random()*0.8+0.2,s:Math.random()*0.8+0.2}));function resize(){W=bgfx.width=Math.floor(innerWidth*dpr);H=bgfx.height=Math.floor(innerHeight*dpr);bgfx.style.width=innerWidth+'px';bgfx.style.height=innerHeight+'px';}addEventListener('resize',resize,{passive:true});resize();function step(){t+=.006;const mouse=window.__introMouse||{x:.5,y:.5};ctx.clearRect(0,0,W,H);ctx.save();ctx.globalAlpha=.6;for(const st of stars){const sx=(st.x+(mouse.x-.5)*.02+t*.002*st.z)%1;const sy=(st.y+(mouse.y-.5)*.02+Math.sin(t+st.x*6)*.0008)%1;ctx.fillStyle='rgba(255,255,255,0.6)';ctx.fillRect(sx*W,sy*H,st.s*dpr,st.s*dpr);}ctx.restore();ctx.globalCompositeOperation='lighter';for(const b of blobs){const cx0=(.5+Math.sin(t*b.spx+b.phaseX)*b.ampX)*W;const cy0=(.55+Math.cos(t*b.spy+b.phaseY)*b.ampY)*H;const inflX=(mouse.x-.5)*(.06*W);const inflY=(mouse.y-.5)*(.08*H);const cx=cx0+inflX;const cy=cy0+inflY;const grad=ctx.createRadialGradient(cx,cy,0,cx,cy,b.r*dpr);grad.addColorStop(0,b.hue+'33');grad.addColorStop(.6,b.hue+'14');grad.addColorStop(1,'rgba(0,0,0,0)');ctx.fillStyle=grad;ctx.beginPath();ctx.arc(cx,cy,b.r*dpr,0,6.28);ctx.fill();}raf=requestAnimationFrame(step);}raf=requestAnimationFrame(step);window.__stopBg=()=>cancelAnimationFrame(raf);if(matchMedia('(pointer:fine)').matches){let rid=null,px=0,py=0;window.addEventListener('pointermove',e=>{const r=intro.getBoundingClientRect();px=(e.clientX-r.width/2)/(r.width/2);py=(e.clientY-r.height/2)/(r.height/2);window.__introMouse={x:e.clientX/innerWidth,y:e.clientY/innerHeight};if(!rid){rid=requestAnimationFrame(()=>{logoCard.style.transform='rotateX('+(-py*6).toFixed(2)+'deg) rotateY('+(px*8).toFixed(2)+'deg)';rid=null;});}}, {passive:true});}}
})();
</script>
</body>
</html>
